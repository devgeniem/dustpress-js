window.DustPress=function(e,r,t){var o={};return o.defaults={type:"post",tidy:!1,render:!1,partial:"",upload:!1,success:function(){},error:function(){},uploadProgress:function(){},downloadProgress:function(){}},o.start=function(){},o.complete=function(){},o.ajax=function(a,s){var n=t.extend({},o.defaults,s);o.success=n.success,o.error=n.error,o.uploadProgress=n.uploadProgress,o.downloadProgress=n.downloadProgress,o.get=n.get?s.get:"",o.path=a,o.params=s,o.get.length&&!o.get.startsWith("?")&&(o.get="?"+o.get);var d="";if(void 0!==e.crypto&&"function"==typeof e.crypto.getRandomValues)for(var u=0;u<4;u++)d+=e.crypto.getRandomValues(new Uint32Array(1));else d=Math.random()+""+Math.random();var l=new Date;l.setTime(l.getTime()+864e5),r.cookie="dpjs_token="+d+"; expires="+l.toGMTString()+"; path=/";var p={url:e.location+o.get,method:n.type,data:{dustpress_data:{path:a,args:n.args,render:n.render,tidy:n.tidy,partial:n.partial,token:d}}};return n.upload&&(p.xhr=function(){var r=new e.XMLHttpRequest;r.upload.addEventListener("progress",o.uploadProgressHandler,!1),r.addEventListener("progress",o.downloadProgressHandler,!1)}),o.start(),t.ajax(p).done(o.successHandler).fail(o.errorHandler).complete(o.complete)},o.successHandler=function(a,s,n){if("string"==typeof a)d=t.parseJSON(a);else var d=a;if(r.cookie="dpjs_token=; expires=-1; path=/",e.DustPressDebugger){delete o.params.success,delete o.params.error;var u={params:o.params,data:d.debug?d.debug:d};e.DustPressDebugger.extend(u,o.path)}void 0===d.error?o.success(d.success,s,n):o.error(d,s,n)},o.errorHandler=function(e,t,a){r.cookie="dpjs_token=; expires=-1; path=/",o.error({error:a},t,e)},o.uploadProgressHandler=function(e){if(e.lengthComputable){var r=e.loaded/e.total;o.uploadProgress(r)}},o.downloadProgressHandler=function(e){if(e.lengthComputable){var r=e.loaded/e.total;o.downloadProgress(r)}},o}(window,document,jQuery);var dp=window.DustPress.ajax;
