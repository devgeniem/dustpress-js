window.DustPress=function(e,r,$){var t={};return t.defaults={type:"post",tidy:!1,render:!1,partial:"",upload:!1,data:!1,success:function(){},error:function(){},uploadProgress:function(){},downloadProgress:function(){},contentType:"application/json"},t.start=function(){},t.complete=function(){},t.ajax=function(a,o){var s=$.extend({},t.defaults,o);t.success=s.success,t.error=s.error,t.uploadProgress=s.uploadProgress,t.downloadProgress=s.downloadProgress,t.get=s.get?o.get:"",t.path=a,t.data=s.data,t.params=o,t.get.length&&!t.get.startsWith("?")&&(t.get="?"+t.get);var n="";if("undefined"!=typeof e.crypto&&"function"==typeof e.crypto.getRandomValues)for(var d=0;4>d;d++)n+=e.crypto.getRandomValues(new Uint32Array(1));else n=Math.random()+""+Math.random();var p=new Date;p.setTime(p.getTime()+864e5),r.cookie="dpjs_token="+n+"; expires="+p.toGMTString()+"; path=/";var u={url:e.location+t.get,method:s.type,contentType:s.contentType,data:{dustpress_data:{path:a,args:s.args,render:s.render,tidy:s.tidy,partial:s.partial,data:s.data,token:n}}};return u.data=JSON.stringify(u.data),s.upload&&(u.xhr=function(){var r=new e.XMLHttpRequest;r.upload.addEventListener("progress",t.uploadProgressHandler,!1),r.addEventListener("progress",t.downloadProgressHandler,!1)}),t.start(),$.ajax(u).done(t.successHandler).fail(t.errorHandler).complete(t.complete)},t.successHandler=function(a,o,s){if("string"==typeof a)var n=$.parseJSON(a);else var n=a;if(r.cookie="dpjs_token=; expires=-1; path=/",e.DustPressDebugger){delete t.params.success,delete t.params.error;var d={params:t.params,data:n.debug?n.debug:n};e.DustPressDebugger.extend(d,t.path)}void 0===n.error?t.success(n.success,n.data,o,s):t.error(n,o,s)},t.errorHandler=function(e,a,o){r.cookie="dpjs_token=; expires=-1; path=/",t.error({error:o},a,e)},t.uploadProgressHandler=function(e){if(e.lengthComputable){var r=e.loaded/e.total;t.uploadProgress(r)}},t.downloadProgressHandler=function(e){if(e.lengthComputable){var r=e.loaded/e.total;t.downloadProgress(r)}},t}(window,document,jQuery);var dp=window.DustPress.ajax;