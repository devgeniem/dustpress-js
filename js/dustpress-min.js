!function(e){var r={};function t(a){if(r[a])return r[a].exports;var n=r[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,t),n.l=!0,n.exports}t.m=e,t.c=r,t.d=function(e,r,a){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:a})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(t.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var n in e)t.d(a,n,function(r){return e[r]}.bind(null,n));return a},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=1)}([function(e,r,t){"use strict";(function(e){function a(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function n(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}t.d(r,"a",function(){return s});var s=function(){function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,r),n(this,"path",""),n(this,"params",{get:"",type:"post",tidy:!1,render:!1,partial:null,upload:!1,data:!1,url:null,bypassMainQuery:!0,contentType:"application/json",token:"",success:function(){},error:function(){},uploadProgress:function(){},downloadProgress:function(){},start:function(){},complete:function(){}}),this.path=e,this.params=Object.assign(this.params,t)}var t,s,o;return t=r,(s=[{key:"send",value:function(){var r=this;this.params.get.length&&!this.params.get.startsWith("?")&&(this.params.get="?"+this.params.get);var t=new Date;t.setTime(t.getTime()+864e5),document.cookie="dpjs_token="+this.params.token+"; expires="+t.toGMTString()+"; path=/";var a={url:this.params.url||dustpressjs_endpoint||window.location+this.params.get,method:this.params.type,contentType:this.params.contentType,data:{dustpress_data:{path:this.path,args:this.params.args,render:this.params.render,tidy:this.params.tidy,partial:this.params.partial,data:this.params.data,token:this.params.token,bypassMainQuery:this.params.bypassMainQuery}}};return a.data=JSON.stringify(a.data),this.params.upload&&(a.xhr=function(){return r.xhrUpload()}),this.params.start(),this.params.successHandler=function(e,t,a){return r.successHandler(e,t,a)},this.params.errorHandler=function(e,t,a){return r.errorHandler(e,t,a)},this.params.uploadProgressHandler=function(e){return r.uploadDownloadProgressHandler(e)},this.params.downloadProgressHandler=function(e){return r.uploadDownloadProgressHandler(e)},e.ajax(a).done(function(e,t,a){return r.params.successHandler(e,t,a)}).fail(function(e,t,a){return r.params.errorHandler(e,t,a)}).always(function(e,t,a){return r.params.complete(e,t,a)})}},{key:"successHandler",value:function(r,t,a){var n;n="string"==typeof r?e.parseJSON(r):r,document.cookie="dpjs_token=; expires=-1; path=/",window.DustPressDebugger&&this.addToDebugger(n),n&&!n.error?this.params.success(n.success,n.data,t,a):this.params.error(n,t,a)}},{key:"xhrUpload",value:function(){var e=this,r=new window.XMLHttpRequest;r.upload.addEventListener("progress",function(r){return e.params.uploadProgressHandler(r)},!1),r.addEventListener("progress",function(r){return e.params.uploadDownloadProgressHandler(r)},!1)}},{key:"errorHandler",value:function(e,r,t){document.cookie="dpjs_token=; expires=-1; path=/",this.params.error({error:t},r,e)}},{key:"uploadDownloadProgressHandler",value:function(e){if(e.lengthComputable){var r=e.loaded/e.total;this.params.downloadProgress(r)}}},{key:"addToDebugger",value:function(e){delete this.params.params.success,delete this.params.params.error;var r={params:this.params.params,data:e.debug?e.debug:e};window.DustPressDebugger.extend(r,this.params.path)}}])&&a(t.prototype,s),o&&a(t,o),r}()}).call(this,t(2))},function(e,r,t){"use strict";t.r(r),t.d(r,"default",function(){return s});var a=t(0);function n(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var s=function(){function e(){var r,t,a;!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),a="",(t="token")in(r=this)?Object.defineProperty(r,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[t]=a,this.setupCrypto()}var r,t,s;return r=e,(t=[{key:"setupCrypto",value:function(){if(void 0!==window.crypto&&"function"==typeof window.crypto.getRandomValues){this.token="";for(var e=0;e<4;e++)this.token+=window.crypto.getRandomValues(new Uint32Array(1))}else this.token=Math.random()+""+Math.random()}},{key:"ajax",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r.token=this.token,new a.a(e,r).send()}}])&&n(r.prototype,t),s&&n(r,s),e}();void 0===window.DustPress&&(window.DustPress=new s,window.dp=function(e,r){return window.DustPress.ajax(e,r)})},function(e,r){e.exports=jQuery}]);
//# sourceMappingURL=dustpress-min.js.map